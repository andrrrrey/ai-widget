diff --git a/widget/widget.css b/widget/widget.css
index e28e8904ea33c012c9380d597b763a5cb8b9662d..3c437bac4666dcd753352688320402b6d664aacc 100644
--- a/widget/widget.css
+++ b/widget/widget.css
@@ -1,37 +1,253 @@
-.aiw-fab{position:fixed;bottom:24px;z-index:99999;width:64px;height:64px;border-radius:50%;border:0;cursor:pointer;
-  box-shadow:0 12px 35px rgba(59,130,246,.35);font-size:24px;line-height:64px;text-align:center;
-  background:linear-gradient(135deg,#5b8dff,#8f6fff 45%,#ff7ac3);color:#fff;transition:transform .25s ease,box-shadow .25s ease,filter .25s ease}
-.aiw-fab:hover{transform:translateY(-2px) scale(1.02);box-shadow:0 16px 40px rgba(59,130,246,.4);filter:saturate(1.05)}
-.aiw-fab:active{transform:translateY(0) scale(.98)}
-.aiw-fab.aiw-right{right:24px}
-.aiw-fab.aiw-left{left:24px}
-
-.aiw-panel{position:fixed;inset:16px;z-index:99998;width:calc(100vw - 32px);height:calc(100vh - 32px);
-  background:linear-gradient(160deg,#f7f9ff,#eef3ff 45%,#e7e9ff);color:#0f172a;border-radius:22px;box-shadow:0 20px 60px rgba(59,130,246,.25);
-  overflow:hidden;opacity:0;transform:scale(.2);transform-origin:right bottom;transition:transform .55s cubic-bezier(.22,1,.36,1),opacity .3s ease;
-  border:1px solid rgba(59,130,246,.15);pointer-events:none;backdrop-filter:blur(8px)}
-.aiw-panel.aiw-right{transform-origin:right bottom}
-.aiw-panel.aiw-left{transform-origin:left bottom}
-.aiw-panel.aiw-open{opacity:1;transform:scale(1);pointer-events:auto}
-
-.aiw-header{display:flex;align-items:center;justify-content:space-between;padding:16px 18px;border-bottom:1px solid rgba(59,130,246,.12);
-  background:linear-gradient(120deg,rgba(91,141,255,.15),rgba(255,122,195,.08));backdrop-filter:blur(6px)}
-.aiw-title{font-size:18px;font-weight:800;font-family:'Inter','SF Pro Display','Segoe UI',sans-serif;color:#0b1220}
-.aiw-close{border:0;background:rgba(15,23,42,.05);color:#0b1220;cursor:pointer;font-size:18px;border-radius:12px;padding:8px;transition:background .2s ease,transform .2s ease}
-.aiw-close:hover{background:rgba(15,23,42,.08);transform:rotate(4deg)}
-
-.aiw-body{display:flex;flex-direction:column;height:calc(100% - 64px);font-family:'Inter','SF Pro Display','Segoe UI',sans-serif;font-size:16px}
-.aiw-messages{flex:1;overflow:auto;padding:18px;display:flex;flex-direction:column;gap:12px;background:linear-gradient(180deg,rgba(255,255,255,.65),rgba(255,255,255,.85));}
-.aiw-msg{display:flex}
-.aiw-user{justify-content:flex-end}
-.aiw-assistant{justify-content:flex-start}
-.aiw-bubble{max-width:85%;padding:12px 14px;border-radius:18px;white-space:pre-wrap;word-break:break-word;font-size:16px;line-height:1.45;box-shadow:0 10px 25px rgba(15,23,42,.08)}
-.aiw-user .aiw-bubble{background:linear-gradient(140deg,#5b8dff,#7aa2ff 45%,#8f6fff);color:#f8fbff;border-bottom-right-radius:8px}
-.aiw-assistant .aiw-bubble{background:#ffffff;color:#0f172a;border:1px solid rgba(59,130,246,.14);border-bottom-left-radius:8px}
-
-.aiw-status{padding:0 18px 10px 18px;color:#54617c;font-size:13px;min-height:20px;font-weight:600}
-.aiw-form{display:flex;gap:10px;padding:14px 18px;border-top:1px solid rgba(59,130,246,.12);background:rgba(255,255,255,.9);backdrop-filter:blur(8px)}
-.aiw-input{flex:1;border-radius:12px;border:1px solid rgba(59,130,246,.18);background:#fff;color:#0f172a;padding:12px 12px;font-size:16px;outline:none;box-shadow:inset 0 1px 2px rgba(15,23,42,.08)}
-.aiw-input:focus{border-color:#5b8dff;box-shadow:0 0 0 3px rgba(91,141,255,.18)}
-.aiw-send{border-radius:12px;border:0;background:linear-gradient(135deg,#5b8dff,#8f6fff 60%,#ff7ac3);color:#fff;padding:12px 14px;font-weight:800;cursor:pointer;box-shadow:0 12px 25px rgba(91,141,255,.35);transition:transform .2s ease,box-shadow .2s ease}
-.aiw-send:hover{transform:translateY(-1px);box-shadow:0 16px 32px rgba(91,141,255,.4)}
+.aiw-fab {
+  position: fixed;
+  bottom: 24px;
+  z-index: 99999;
+  width: 64px;
+  height: 64px;
+  border-radius: 50%;
+  border: 0;
+  cursor: pointer;
+  box-shadow: 0 12px 35px rgba(59, 130, 246, 0.35);
+  font-size: 24px;
+  line-height: 64px;
+  text-align: center;
+  background: linear-gradient(135deg, #5b8dff, #8f6fff 45%, #ff7ac3);
+  color: #fff;
+  transition: transform 0.25s ease, box-shadow 0.25s ease, filter 0.25s ease;
+  overflow: hidden;
+}
+
+.aiw-fab:hover {
+  transform: translateY(-2px) scale(1.02);
+  box-shadow: 0 16px 40px rgba(59, 130, 246, 0.4);
+  filter: saturate(1.05);
+}
+
+.aiw-fab:active {
+  transform: translateY(0) scale(0.98);
+}
+
+.aiw-fab.aiw-right {
+  right: 24px;
+}
+
+.aiw-fab.aiw-left {
+  left: 24px;
+}
+
+.aiw-fab.aiw-expanding {
+  animation: aiw-expand 0.6s ease-in;
+}
+
+.aiw-fab.aiw-expanding i {
+  animation: aiw-fab-fade 0.25s;
+}
+
+@keyframes aiw-expand {
+  0% {
+    transform: scale(1);
+  }
+  50% {
+    transform: scale(12);
+  }
+  100% {
+    transform: scale(22);
+  }
+}
+
+@keyframes aiw-fab-fade {
+  from {
+    opacity: 1;
+  }
+  to {
+    opacity: 0;
+  }
+}
+
+.aiw-overlay {
+  position: fixed;
+  inset: 0;
+  background: rgba(15, 23, 42, 0.35);
+  backdrop-filter: blur(8px);
+  opacity: 0;
+  pointer-events: none;
+  transition: opacity 0.45s ease;
+  z-index: 99997;
+}
+
+.aiw-overlay.aiw-show {
+  opacity: 1;
+  pointer-events: auto;
+}
+
+.aiw-panel {
+  position: fixed;
+  inset: 16px;
+  z-index: 99998;
+  width: calc(100vw - 32px);
+  height: calc(100vh - 32px);
+  background: linear-gradient(160deg, #f7f9ff, #eef3ff 45%, #e7e9ff);
+  color: #0f172a;
+  border-radius: 22px;
+  box-shadow: 0 20px 60px rgba(59, 130, 246, 0.25);
+  overflow: hidden;
+  opacity: 0;
+  transform: scale(0.2);
+  transform-origin: right bottom;
+  transition: transform 0.55s cubic-bezier(0.22, 1, 0.36, 1), opacity 0.3s ease;
+  border: 1px solid rgba(59, 130, 246, 0.15);
+  pointer-events: none;
+  backdrop-filter: blur(8px);
+}
+
+.aiw-panel.aiw-right {
+  transform-origin: right bottom;
+}
+
+.aiw-panel.aiw-left {
+  transform-origin: left bottom;
+}
+
+.aiw-panel.aiw-open {
+  opacity: 1;
+  transform: scale(1);
+  pointer-events: auto;
+}
+
+.aiw-header {
+  display: flex;
+  align-items: center;
+  justify-content: space-between;
+  padding: 16px 18px;
+  border-bottom: 1px solid rgba(59, 130, 246, 0.12);
+  background: linear-gradient(120deg, rgba(91, 141, 255, 0.15), rgba(255, 122, 195, 0.08));
+  backdrop-filter: blur(6px);
+}
+
+.aiw-title {
+  font-size: 18px;
+  font-weight: 800;
+  font-family: 'Inter', 'SF Pro Display', 'Segoe UI', sans-serif;
+  color: #0b1220;
+}
+
+.aiw-close {
+  border: 0;
+  background: rgba(15, 23, 42, 0.05);
+  color: #0b1220;
+  cursor: pointer;
+  font-size: 18px;
+  border-radius: 12px;
+  padding: 8px;
+  transition: background 0.2s ease, transform 0.2s ease;
+}
+
+.aiw-close:hover {
+  background: rgba(15, 23, 42, 0.08);
+  transform: rotate(4deg);
+}
+
+.aiw-body {
+  display: flex;
+  flex-direction: column;
+  height: calc(100% - 64px);
+  font-family: 'Inter', 'SF Pro Display', 'Segoe UI', sans-serif;
+  font-size: 16px;
+}
+
+.aiw-messages {
+  flex: 1;
+  overflow: auto;
+  padding: 18px;
+  display: flex;
+  flex-direction: column;
+  gap: 12px;
+  background: linear-gradient(180deg, rgba(255, 255, 255, 0.65), rgba(255, 255, 255, 0.85));
+}
+
+.aiw-msg {
+  display: flex;
+}
+
+.aiw-user {
+  justify-content: flex-end;
+}
+
+.aiw-assistant {
+  justify-content: flex-start;
+}
+
+.aiw-bubble {
+  max-width: 85%;
+  padding: 12px 14px;
+  border-radius: 18px;
+  white-space: pre-wrap;
+  word-break: break-word;
+  font-size: 16px;
+  line-height: 1.45;
+  box-shadow: 0 10px 25px rgba(15, 23, 42, 0.08);
+}
+
+.aiw-user .aiw-bubble {
+  background: linear-gradient(140deg, #5b8dff, #7aa2ff 45%, #8f6fff);
+  color: #f8fbff;
+  border-bottom-right-radius: 8px;
+}
+
+.aiw-assistant .aiw-bubble {
+  background: #ffffff;
+  color: #0f172a;
+  border: 1px solid rgba(59, 130, 246, 0.14);
+  border-bottom-left-radius: 8px;
+}
+
+.aiw-status {
+  padding: 0 18px 10px 18px;
+  color: #54617c;
+  font-size: 13px;
+  min-height: 20px;
+  font-weight: 600;
+}
+
+.aiw-form {
+  display: flex;
+  gap: 10px;
+  padding: 14px 18px;
+  border-top: 1px solid rgba(59, 130, 246, 0.12);
+  background: rgba(255, 255, 255, 0.9);
+  backdrop-filter: blur(8px);
+}
+
+.aiw-input {
+  flex: 1;
+  border-radius: 12px;
+  border: 1px solid rgba(59, 130, 246, 0.18);
+  background: #fff;
+  color: #0f172a;
+  padding: 12px 12px;
+  font-size: 16px;
+  outline: none;
+  box-shadow: inset 0 1px 2px rgba(15, 23, 42, 0.08);
+}
+
+.aiw-input:focus {
+  border-color: #5b8dff;
+  box-shadow: 0 0 0 3px rgba(91, 141, 255, 0.18);
+}
+
+.aiw-send {
+  border-radius: 12px;
+  border: 0;
+  background: linear-gradient(135deg, #5b8dff, #8f6fff 60%, #ff7ac3);
+  color: #fff;
+  padding: 12px 14px;
+  font-weight: 800;
+  cursor: pointer;
+  box-shadow: 0 12px 25px rgba(91, 141, 255, 0.35);
+  transition: transform 0.2s ease, box-shadow 0.2s ease;
+}
+
+.aiw-send:hover {
+  transform: translateY(-1px);
+  box-shadow: 0 16px 32px rgba(91, 141, 255, 0.4);
+}
diff --git a/widget/widget.js b/widget/widget.js
index 3dbaa3ce35f99a2655b0b7514daafbfa0a1c7905..c8674d667ecf02493dc7dd81d267860fd029f0f8 100644
--- a/widget/widget.js
+++ b/widget/widget.js
@@ -11,68 +11,72 @@
   }
 
   const BASE = new URL(script.src).origin; // https://loginov.futuguru.com
 
   const cssUrl = BASE + "/widget/widget.css";
   const link = document.createElement("link");
   link.rel = "stylesheet";
   link.href = cssUrl;
   document.head.appendChild(link);
 
   const visitorKey = "aiw_visitor_id";
   let visitorId = localStorage.getItem(visitorKey);
   if (!visitorId) {
     visitorId = (crypto?.randomUUID?.() || String(Math.random()).slice(2) + Date.now());
     localStorage.setItem(visitorKey, visitorId);
   }
 
   let chatId = null;
   let isOpen = false;
 
   // UI
   const btn = document.createElement("button");
   btn.className = "aiw-fab " + (position === "left" ? "aiw-left" : "aiw-right");
   btn.innerHTML = "üí¨";
 
+  const overlay = document.createElement("div");
+  overlay.className = "aiw-overlay";
+
   const panel = document.createElement("div");
   panel.className = "aiw-panel " + (position === "left" ? "aiw-left" : "aiw-right");
   panel.innerHTML = `
     <div class="aiw-header">
       <div class="aiw-title">${escapeHtml(title)}</div>
       <button class="aiw-close" title="–ó–∞–∫—Ä—ã—Ç—å">‚úï</button>
     </div>
     <div class="aiw-body">
       <div class="aiw-messages" id="aiw-msgs"></div>
       <div class="aiw-status" id="aiw-status"></div>
       <form class="aiw-form" id="aiw-form">
         <input class="aiw-input" id="aiw-input" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." autocomplete="off"/>
         <button class="aiw-send" type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
       </form>
     </div>
   `;
 
   document.body.appendChild(btn);
+  document.body.appendChild(overlay);
   document.body.appendChild(panel);
 
   const closeBtn = panel.querySelector(".aiw-close");
   const form = panel.querySelector("#aiw-form");
   const input = panel.querySelector("#aiw-input");
   const msgs = panel.querySelector("#aiw-msgs");
   const statusEl = panel.querySelector("#aiw-status");
 
   function setStatus(text) {
     statusEl.textContent = text || "";
   }
 
   function append(role, text) {
     const item = document.createElement("div");
     item.className = "aiw-msg aiw-" + role;
     item.innerHTML = `<div class="aiw-bubble">${escapeHtml(text)}</div>`;
     msgs.appendChild(item);
     msgs.scrollTop = msgs.scrollHeight;
     return item;
   }
 
   async function ensureChat() {
     if (chatId) return chatId;
     const r = await fetch(`${BASE}/api/widget/${projectId}/chat/start`, {
       method: "POST",
@@ -110,64 +114,77 @@
       acc += t;
       assistantBubble.querySelector(".aiw-bubble").textContent = acc;
       msgs.scrollTop = msgs.scrollHeight;
     });
 
     es.addEventListener("waiting_for_human", () => {
       setStatus("–û–ø–µ—Ä–∞—Ç–æ—Ä –ø–æ–¥–∫–ª—é—á–∏–ª—Å—è. –ü–æ–¥–æ–∂–¥–∏—Ç–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞‚Ä¶");
     });
 
     es.addEventListener("error", (e) => {
       try {
         const data = JSON.parse(e.data);
         setStatus("–û—à–∏–±–∫–∞: " + (data.message || "unknown"));
       } catch {
         setStatus("–û—à–∏–±–∫–∞");
       }
       es.close();
     });
 
     es.addEventListener("done", () => {
       setStatus("");
       es.close();
     });
   }
 
-  btn.addEventListener("click", async () => {
-    isOpen = !isOpen;
-    panel.classList.toggle("aiw-open", isOpen);
-    if (isOpen) {
-      try {
-        await ensureChat();
-      } catch (e) {
-        console.error(e);
-      }
-      setTimeout(() => input.focus(), 50);
+  async function openPanel() {
+    isOpen = true;
+    btn.classList.add("aiw-expanding");
+    overlay.classList.add("aiw-show");
+    panel.classList.add("aiw-open");
+    try {
+      await ensureChat();
+    } catch (e) {
+      console.error(e);
     }
-  });
+    setTimeout(() => input.focus(), 50);
+    setTimeout(() => btn.classList.remove("aiw-expanding"), 650);
+  }
 
-  closeBtn.addEventListener("click", () => {
+  function closePanel() {
     isOpen = false;
+    overlay.classList.remove("aiw-show");
     panel.classList.remove("aiw-open");
+  }
+
+  btn.addEventListener("click", async () => {
+    if (isOpen) {
+      closePanel();
+    } else {
+      await openPanel();
+    }
   });
 
+  closeBtn.addEventListener("click", closePanel);
+  overlay.addEventListener("click", closePanel);
+
   form.addEventListener("submit", async (e) => {
     e.preventDefault();
     const text = String(input.value || "").trim();
     if (!text) return;
     try {
       await sendMessage(text);
     } catch (err) {
       console.error(err);
       setStatus("–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ");
     }
   });
 
   function escapeHtml(s) {
     return String(s)
       .replaceAll("&", "&amp;")
       .replaceAll("<", "&lt;")
       .replaceAll(">", "&gt;")
       .replaceAll('"', "&quot;")
       .replaceAll("'", "&#039;");
   }
 })();
