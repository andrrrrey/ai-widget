diff --git a/widget/widget.js b/widget/widget.js
index de4d13317236b0413caa89be7010f2950b253734..aeb62214febfc23180c87d014d931843cb829903 100644
--- a/widget/widget.js
+++ b/widget/widget.js
@@ -68,145 +68,183 @@
       </div>
     </div>
   `;
 
   document.body.appendChild(btn);
   document.body.appendChild(overlay);
   document.body.appendChild(overlayClose);
   document.body.appendChild(panel);
 
   const form = panel.querySelector("#aiw-form");
   const input = panel.querySelector("#aiw-input");
   const msgs = panel.querySelector("#aiw-msgs");
   const statusEl = panel.querySelector("#aiw-status");
 
   function setStatus(text) {
     statusEl.textContent = text || "";
   }
 
   function append(role, text) {
     const item = document.createElement("div");
     const isUser = role === "user";
     item.className = "aiw-msg " + (isUser ? "aiw-right" : "aiw-left");
 
     const label = document.createElement("div");
     label.className = "aiw-label";
-    label.textContent = isUser ? "ME" : "OUR AI";
+    label.textContent = isUser ? "ME" : role === "human" ? "OPERATOR" : "OUR AI";
 
     const bubble = document.createElement("div");
     bubble.className = "aiw-bubble";
     const p = document.createElement("p");
     p.textContent = text;
     bubble.appendChild(p);
 
     item.appendChild(label);
     item.appendChild(bubble);
 
     msgs.appendChild(item);
     msgs.scrollTop = msgs.scrollHeight;
     return p;
   }
 
   async function ensureChat() {
     if (chatId) return chatId;
     const r = await fetch(`${BASE}/api/widget/${projectId}/chat/start`, {
       method: "POST",
       headers: { "Content-Type": "application/json" },
       body: JSON.stringify({ visitorId }),
     });
     const j = await r.json();
     if (!r.ok) throw new Error(j?.error || "start_failed");
     chatId = j.chatId;
     return chatId;
   }
 
+  function renderMessages(items) {
+    msgs.innerHTML = "";
+    items.forEach((item) => append(item.role, item.content));
+    msgs.scrollTop = msgs.scrollHeight;
+  }
+
+  let pollTimer = null;
+  let pollInFlight = false;
+
+  async function syncMessages() {
+    if (!chatId || pollInFlight) return;
+    pollInFlight = true;
+    try {
+      const r = await fetch(`${BASE}/api/widget/${projectId}/chat/${chatId}/messages`);
+      if (!r.ok) throw new Error("messages_failed");
+      const j = await r.json();
+      if (Array.isArray(j.items)) renderMessages(j.items);
+    } catch (e) {
+      console.warn("syncMessages failed", e);
+    } finally {
+      pollInFlight = false;
+    }
+  }
+
+  function startPollingMessages() {
+    if (pollTimer) return;
+    pollTimer = setInterval(syncMessages, 2000);
+  }
+
+  function stopPollingMessages() {
+    if (!pollTimer) return;
+    clearInterval(pollTimer);
+    pollTimer = null;
+  }
+
   async function sendMessage(text) {
     await ensureChat();
 
     append("user", text);
     input.value = "";
     input.focus();
 
     setStatus("Печатает…");
 
     // Stream assistant via SSE
     const url = `${BASE}/api/widget/${projectId}/chat/${chatId}/stream?message=${encodeURIComponent(text)}`;
     const es = new EventSource(url, { withCredentials: true });
 
     let assistantText = null;
     let acc = "";
 
     es.addEventListener("token", (e) => {
       const data = JSON.parse(e.data);
       const t = data.t || "";
       if (!assistantText) {
         assistantText = append("assistant", "");
       }
       acc += t;
       assistantText.textContent = acc;
       msgs.scrollTop = msgs.scrollHeight;
     });
 
     es.addEventListener("waiting_for_human", () => {
       setStatus("Оператор подключился. Подождите, пожалуйста…");
+      startPollingMessages();
     });
 
     es.addEventListener("error", (e) => {
       try {
         const data = JSON.parse(e.data);
         setStatus("Ошибка: " + (data.message || "unknown"));
       } catch {
         setStatus("Ошибка");
       }
       es.close();
     });
 
     es.addEventListener("done", () => {
       setStatus("");
       es.close();
     });
   }
 
   async function openPanel() {
     isOpen = true;
     btn.classList.add("aiw-hide");
     overlay.classList.add("aiw-show");
     overlayClose.classList.add("aiw-visible");
     panel.classList.add("aiw-open");
     try {
       await ensureChat();
+      await syncMessages();
     } catch (e) {
       console.error(e);
     }
     setTimeout(() => input.focus(), 120);
   }
 
   function closePanel() {
     isOpen = false;
     overlay.classList.remove("aiw-show");
     overlayClose.classList.remove("aiw-visible");
     panel.classList.remove("aiw-open");
+    stopPollingMessages();
     setTimeout(() => btn.classList.remove("aiw-hide"), 200);
   }
 
   btn.addEventListener("click", async () => {
     if (isOpen) {
       closePanel();
     } else {
       await openPanel();
     }
   });
 
   overlayClose.addEventListener("click", closePanel);
 
   form.addEventListener("submit", async (e) => {
     e.preventDefault();
     const text = String(input.value || "").trim();
     if (!text) return;
     try {
       await sendMessage(text);
     } catch (err) {
       console.error(err);
       setStatus("Не удалось отправить сообщение");
     }
   });
 
